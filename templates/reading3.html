{% comment %} reading.html {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
  <title>StudyLab</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="/static/css/animate.css">
  
  <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
  <link rel="stylesheet" href="/static/css/owl.theme.default.min.css">
  <link rel="stylesheet" href="/static/css/magnific-popup.css">

  <link rel="stylesheet" href="/static/css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="/static/css/jquery.timepicker.css">

  
  <link rel="stylesheet" href="/static/css/flaticon.css">
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
 <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
   <div class="container">
     <a class="navbar-brand" href="/"><span>Study</span>Lab</a>
     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
       <span class="oi oi-menu"></span> Menu
     </button>

     <div class="collapse navbar-collapse" id="ftco-nav">
       <ul class="navbar-nav ml-auto">
          <li class="nav-item active"><a href="/" class="nav-link">首頁</a></li>
                <li class="nav-item"><a href="/user/" class="nav-link">會員資料</a></li>
                <li class="nav-item"><a href="/theme/" class="nav-link">學習主選單</a></li>
                <li class="nav-item"><a href="/vocabulary/" class="nav-link">單字本</a></li>
                <li class="nav-item"><a href="/record/" class="nav-link">錯題本</a></li>
                <li class="nav-item"><a href="/report/" class="nav-link">成果報表</a></li>
{#                <li class="nav-item"><a href="/login/" class="nav-link">登入</a></li>#}
                <li class="nav-item"><a href="/logout/" class="nav-link">登出</a></li>
       </ul>
     </div>
   </div>
 </nav>
 <!-- END nav -->
 
 <section class="hero-wrap hero-wrap-2" style="background-image: url('/static/images/bg_2.jpg');">
  <div class="overlay"></div>
{#  <div class="container">#}
{#    <div class="row no-gutters slider-text align-items-end justify-content-center">#}
{#      <div class="col-md-9 ftco-animate pb-5 text-center">#}
{#       <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home <i class="fa fa-chevron-right"></i></a></span> <span>About us <i class="fa fa-chevron-right"></i></span></p>#}
{#       <h1 class="mb-0 bread">About Us</h1>#}
{#     </div>#}
{#   </div>#}
{# </div>#}
</section>

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/static/css/animate.css">


     </div>
   </div>
   <div class="col-md-6 pl-md-5 py-5">
    <div class="row justify-content-start pb-3" style="text-align: center">
{#        <textarea id = "result" rows="8" cols="80"></textarea> <br>#}
{#    <button id = "start">Start</button>#}
{#		<button id = "stop">Stop</button>#}

		<script type="text/javascript">
			var startButton = document.getElementById('start');
			var stopButton = document.getElementById('stop');
			var resultElement = document.getElementById('result');

			var recognition = new webkitSpeechRecognition();

			recognition.lang = window.navigator.language;
			recognition.interimResults = true;

			startButton.addEventListener('click', () => { recognition.start(); });
			stopButton.addEventListener('click', () => { recognition.stop(); });

			recognition.addEventListener('result', (event) => {
				const result = event.results[event.results.length - 1][0].transcript;
				resultElement.textContent = result;
			});
		</script>
      <div class="col-md-12 heading-section ftco-animate">
{#       <span class="subheading">Enhanced Your Skills</span>#}
{#       <h4 class="mb-4">請開始描述圖片</h4>#}
{#          <p><a class="btn btn-primary">開始錄製</a></p>#}
{#           <div>#}
{#        <audio controls autoplay></audio><br>#}
{#        <input onclick="startRecording()" type="button" value="錄音" class="btn btn-primary"/>#}
{#        <input onclick="stopRecording()" type="button" value="停止" class="btn btn-primary"/>#}
{#        <input onclick="playRecording()" type="button" value="播放" class="btn btn-primary"/>#}
{#        <input onclick="uploadAudio()" type="button" value="提交" class="btn btn-primary"/>#}
{#    </div>#}

          <script type="text/javascript" src="HZRecorder.js"></script>


    <script>

        var recorder;

        var audio = document.querySelector('audio');

        function startRecording() {
            HZRecorder.get(function (rec) {
                recorder = rec;
                recorder.start();
            });
        }

        function stopRecording() {
            recorder.stop();
        }

        function playRecording() {
            recorder.play(audio);
        }

        function uploadAudio() {
            recorder.upload("Handler1.ashx", function (state, e) {
                switch (state) {
                    case 'uploading':
                        //var percentComplete = Math.round(e.loaded * 100 / e.total) + '%';
                        break;
                    case 'ok':
                        //alert(e.target.responseText);
                        alert("上傳成功");
                        break;
                    case 'error':
                        alert("上傳失敗");
                        break;
                    case 'cancel':
                        alert("上傳被取消");
                        break;
                }
            });
        }

    </script>
{#       <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p>#}
{#        <p style="text-align: right"><a class="btn btn-primary" href="/example/gtp_reading/">下一步</a></p>#}
{#     </div>#}
   </div>
 </div>
</div>
</div>
</div>
</div>
</section>


<section class="ftco-section ftco-about img">
    <div class="container">
        <div class="row d-flex">
            <div class="col-md-12 about-intro">
                <div class="row">
                    <div class="col-md-6 d-flex">
                        <div class="d-flex about-wrap">
                            <div class="img d-flex align-items-center justify-content-center"
                                 style="background-image:url(/static/images/trans1.jpeg);">
                            </div>

                        </div>
                    </div>
                    <div class="col-md-6 pl-md-5 py-5">
                        <div class="row justify-content-start pb-3" style="text-align: center">
                            <div class="col-md-12 heading-section ftco-animate">
                                {#       <span class="subheading">Enhanced Your Skills</span>#}

                                <h4 class="mb-4">請開始描述圖片</h4>
                                <button class="btn btn-primary" id="start">開始錄音</button>
                                <button class="btn btn-primary" id="stop">停止錄音</button>
                                <p id="transcription"></p>


                                <script>
                                    var recognition = new webkitSpeechRecognition();
                                    recognition.lang = 'en-US';
                                    recognition.continuous = true;  // 設定錄音為持續模式
                                    recognition.interimResults = true;
                                    recognition.maxAlternatives = 1;
                                    recognition.timeout = 60;  // 設定無聲音輸入的時間長度為 60 秒


                                    document.getElementById('start').onclick = function () {
                                        recognition.start();

                                    };

                                    document.getElementById('stop').onclick = function () {
                                        recognition.stop();

                                    };

                                    recognition.onresult = function (event) {
                                        var transcript = event.results[0][0].transcript;
                                        document.getElementById('transcription').innerText = transcript;

                                        // 將轉錄結果傳送到後端
                                        fetch('/transcribe/', {
                                            method: 'POST',
                                            body: JSON.stringify({'transcript': transcript}),
                                            headers: {'Content-Type': 'application/json'}
                                        });
                                    };
                                </script>

{#                                <h4 class="mb-4">請開始描述圖片</h4>#}
{#                                <p><a class="btn btn-primary">開始錄製</a></p>#}
{#                                <p>Far far away, behind the word mountains, far from the countries Vokalia and#}
{#                                    Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right#}
{#                                    at the coast of the Semantics, a large language ocean. A small river named Duden#}
{#                                    flows by their place and supplies it with the necessary regelialia.</p>#}
                                <p style="text-align: right"><a class="btn btn-primary"
                                                                href="/example/gtp_reading3/">下一步</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- loader -->
<div id="ftco-loader" class="show fullscreen">
    <svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/>
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00"/>
    </svg>
</div>


<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery-migrate-3.0.1.min.js"></script>
<script src="/static/js/popper.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/jquery.easing.1.3.js"></script>
<script src="/static/js/jquery.waypoints.min.js"></script>
<script src="/static/js/jquery.stellar.min.js"></script>
<script src="/static/js/owl.carousel.min.js"></script>
<script src="/static/js/jquery.magnific-popup.min.js"></script>
<script src="/static/js/jquery.animateNumber.min.js"></script>
<script src="/static/js/bootstrap-datepicker.js"></script>
<script src="/static/js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="/static/js/google-map.js"></script>
<script src="/static/js/main.js"></script>
<script src="/static/js/HZRecorder.js"></script>
</body>
</html>